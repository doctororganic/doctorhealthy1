<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Workout Generator - Nutrition Platform</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css" rel="stylesheet" id="bootstrap-rtl-css" disabled>
    
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <!-- Custom CSS -->
    <link href="src/css/style.css" rel="stylesheet">
    
    <!-- PWA Meta Tags -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#28a745">
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="apple-touch-icon" href="icons/icon-192x192.svg">
    <link rel="mask-icon" href="icons/icon-192x192.svg" color="#28a745">
    
    <!-- Custom CSS -->
    <style>
        :root {
            --primary-color: #2563eb;
            --secondary-color: #1e40af;
            --accent-color: #f59e0b;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --danger-color: #ef4444;
            --dark-color: #1f2937;
            --light-color: #f8fafc;
            --border-radius: 12px;
            --box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            color: var(--dark-color);
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        body[dir="rtl"] {
            font-family: 'Amiri', serif;
        }

        .container-fluid {
            padding: 20px;
        }

        .workout-header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: var(--border-radius);
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--box-shadow);
            text-align: center;
        }

        .workout-header h1 {
            color: var(--primary-color);
            font-weight: 700;
            margin-bottom: 1rem;
        }

        .workout-header p {
            color: #6b7280;
            font-size: 1.1rem;
        }

        .workout-tabs {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: var(--border-radius);
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--box-shadow);
        }

        .nav-tabs {
            border-bottom: 2px solid #e5e7eb;
            margin-bottom: 2rem;
        }

        .nav-tabs .nav-link {
            border: none;
            border-radius: 8px 8px 0 0;
            color: #6b7280;
            font-weight: 500;
            padding: 1rem 2rem;
            margin-right: 0.5rem;
            transition: all 0.3s ease;
        }

        .nav-tabs .nav-link:hover {
            color: var(--primary-color);
            background-color: #f3f4f6;
        }

        .nav-tabs .nav-link.active {
            color: var(--primary-color);
            background-color: white;
            border-bottom: 2px solid var(--primary-color);
            font-weight: 600;
        }

        .form-section {
            background: #f8fafc;
            border-radius: var(--border-radius);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border-left: 4px solid var(--primary-color);
        }

        .form-section h4 {
            color: var(--primary-color);
            margin-bottom: 1rem;
            font-weight: 600;
        }

        .form-control, .form-select {
            border-radius: 8px;
            border: 1px solid #d1d5db;
            padding: 0.75rem;
            transition: all 0.3s ease;
        }

        .form-control:focus, .form-select:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 0.2rem rgba(37, 99, 235, 0.25);
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border: none;
            border-radius: 8px;
            padding: 0.75rem 2rem;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(37, 99, 235, 0.3);
        }

        .btn-success {
            background: linear-gradient(135deg, var(--success-color), #059669);
            border: none;
            border-radius: 8px;
            padding: 0.75rem 2rem;
            font-weight: 500;
        }

        .btn-warning {
            background: linear-gradient(135deg, var(--warning-color), #d97706);
            border: none;
            border-radius: 8px;
            padding: 0.75rem 2rem;
            font-weight: 500;
        }

        .results-section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: var(--border-radius);
            padding: 2rem;
            margin-top: 2rem;
            box-shadow: var(--box-shadow);
            display: none;
        }

        .workout-plan {
            background: #f8fafc;
            border-radius: var(--border-radius);
            padding: 1.5rem;
            margin-bottom: 1rem;
            border-left: 4px solid var(--success-color);
        }

        .exercise-card {
            background: white;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            border-left: 3px solid var(--accent-color);
        }

        .supplement-card {
            background: white;
            border-radius: var(--border-radius);
            padding: 1.5rem;
            margin-bottom: 1rem;
            box-shadow: var(--box-shadow);
            transition: transform 0.3s ease;
        }

        .supplement-card:hover {
            transform: translateY(-2px);
        }

        .supplement-premium {
            border: 2px solid var(--accent-color);
            position: relative;
        }

        .premium-badge {
            position: absolute;
            top: -10px;
            right: 10px;
            background: var(--accent-color);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .upload-area {
            border: 2px dashed #d1d5db;
            border-radius: var(--border-radius);
            padding: 3rem;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .upload-area:hover {
            border-color: var(--primary-color);
            background-color: #f3f4f6;
        }

        .upload-area.dragover {
            border-color: var(--primary-color);
            background-color: rgba(37, 99, 235, 0.1);
        }

        .language-switcher {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }

        .flag-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid white;
            margin: 0 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            background-size: cover;
            background-position: center;
        }

        .flag-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .flag-btn.active {
            border-color: var(--accent-color);
            box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.3);
        }

        .flag-en {
            background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMjAiIGZpbGw9IiMwMDUyQjQiLz4KPHN0cmlwZSB4MT0iMCIgeTE9IjEwIiB4Mj0iNDAiIHkyPSIxMCIgc3Ryb2tlPSIjRkZGRkZGIiBzdHJva2Utd2lkdGg9IjIiLz4KPHN0cmlwZSB4MT0iMCIgeTE9IjE0IiB4Mj0iNDAiIHkyPSIxNCIgc3Ryb2tlPSIjRkYwMDAwIiBzdHJva2Utd2lkdGg9IjIiLz4KPHN0cmlwZSB4MT0iMCIgeTE9IjE4IiB4Mj0iNDAiIHkyPSIxOCIgc3Ryb2tlPSIjRkZGRkZGIiBzdHJva2Utd2lkdGg9IjIiLz4KPHN0cmlwZSB4MT0iMCIgeTE9IjIyIiB4Mj0iNDAiIHkyPSIyMiIgc3Ryb2tlPSIjRkYwMDAwIiBzdHJva2Utd2lkdGg9IjIiLz4KPHN0cmlwZSB4MT0iMCIgeTE9IjI2IiB4Mj0iNDAiIHkyPSIyNiIgc3Ryb2tlPSIjRkZGRkZGIiBzdHJva2Utd2lkdGg9IjIiLz4KPHN0cmlwZSB4MT0iMCIgeTE9IjMwIiB4Mj0iNDAiIHkyPSIzMCIgc3Ryb2tlPSIjRkYwMDAwIiBzdHJva2Utd2lkdGg9IjIiLz4KPC9zdmc+');
        }

        .flag-ar {
            background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMjAiIGZpbGw9IiMwMDY2MDAiLz4KPHN0cmlwZSB4MT0iMCIgeTE9IjEzIiB4Mj0iNDAiIHkyPSIxMyIgc3Ryb2tlPSIjRkZGRkZGIiBzdHJva2Utd2lkdGg9IjQiLz4KPHN0cmlwZSB4MT0iMCIgeTE9IjI3IiB4Mj0iNDAiIHkyPSIyNyIgc3Ryb2tlPSIjRkYwMDAwIiBzdHJva2Utd2lkdGg9IjQiLz4KPC9zdmc+');
        }

        @media (max-width: 768px) {
            .container-fluid {
                padding: 10px;
            }
            
            .workout-header {
                padding: 1.5rem;
            }
            
            .workout-tabs {
                padding: 1rem;
            }
            
            .nav-tabs .nav-link {
                padding: 0.75rem 1rem;
                margin-right: 0.25rem;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <!-- Language Switcher -->
    <div class="language-switcher">
        <div class="flag-btn flag-en active" onclick="switchLanguage('en')" title="English"></div>
        <div class="flag-btn flag-ar" onclick="switchLanguage('ar')" title="العربية"></div>
    </div>

    <div class="container-fluid">
        <!-- Header -->
        <div class="workout-header">
            <h1 data-translate="workout_title">Workout Generator & Injury Management</h1>
            <p data-translate="workout_subtitle">Create personalized workout plans with injury considerations and supplement recommendations</p>
            <button class="btn btn-secondary mt-2" onclick="window.location.href='index.html'">
                <i class="fas fa-home"></i> <span data-translate="back_home">Back to Home</span>
            </button>
        </div>

        <!-- Main Tabs -->
        <div class="workout-tabs">
            <ul class="nav nav-tabs" id="workoutTabs" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="generator-tab" data-bs-toggle="tab" data-bs-target="#generator" type="button" role="tab">
                        <i class="fas fa-dumbbell"></i> <span data-translate="workout_generator">Workout Generator</span>
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="supplements-tab" data-bs-toggle="tab" data-bs-target="#supplements" type="button" role="tab">
                        <i class="fas fa-pills"></i> <span data-translate="supplements">Supplements</span>
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="products-tab" data-bs-toggle="tab" data-bs-target="#products" type="button" role="tab">
                        <i class="fas fa-upload"></i> <span data-translate="product_upload">Product Upload</span>
                    </button>
                </li>
            </ul>

            <div class="tab-content" id="workoutTabContent">
                <!-- Workout Generator Tab -->
                <div class="tab-pane fade show active" id="generator" role="tabpanel">
                    <form id="workoutForm">
                        <!-- Personal Information -->
                        <div class="form-section">
                            <h4 data-translate="personal_info">Personal Information</h4>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label class="form-label" data-translate="name">Name</label>
                                    <input type="text" class="form-control" id="userName" required>
                                </div>
                                <div class="col-md-3 mb-3">
                                    <label class="form-label" data-translate="age">Age</label>
                                    <input type="number" class="form-control" id="userAge" min="13" max="100" required>
                                </div>
                                <div class="col-md-3 mb-3">
                                    <label class="form-label" data-translate="gender">Gender</label>
                                    <select class="form-select" id="userGender" required>
                                        <option value="" data-translate="select_gender">Select Gender</option>
                                        <option value="male" data-translate="male">Male</option>
                                        <option value="female" data-translate="female">Female</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- Fitness Goals -->
                        <div class="form-section">
                            <h4 data-translate="fitness_goals">Fitness Goals</h4>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label class="form-label" data-translate="primary_goal">Primary Goal</label>
                                    <select class="form-select" id="fitnessGoal" required>
                                        <option value="" data-translate="select_goal">Select Goal</option>
                                        <option value="weight_loss" data-translate="weight_loss">Weight Loss</option>
                                        <option value="muscle_gain" data-translate="muscle_gain">Muscle Gain</option>
                                        <option value="endurance" data-translate="endurance">Endurance</option>
                                        <option value="cutting" data-translate="cutting">Cutting</option>
                                        <option value="bulking" data-translate="bulking">Bulking</option>
                                        <option value="strength" data-translate="strength">Strength</option>
                                    </select>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label" data-translate="experience_level">Experience Level</label>
                                    <select class="form-select" id="experienceLevel" required>
                                        <option value="" data-translate="select_experience">Select Experience</option>
                                        <option value="beginner" data-translate="beginner">Beginner (0-6 months)</option>
                                        <option value="intermediate" data-translate="intermediate">Intermediate (6 months - 2 years)</option>
                                        <option value="advanced" data-translate="advanced">Advanced (2+ years)</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- Available Equipment -->
                        <div class="form-section">
                            <h4 data-translate="available_equipment">Available Equipment</h4>
                            <div class="row">
                                <div class="col-12 mb-3">
                                    <div class="form-check-group">
                                        <div class="row">
                                            <div class="col-md-4 mb-2">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" id="eq_bodyweight" value="bodyweight">
                                                    <label class="form-check-label" for="eq_bodyweight" data-translate="bodyweight">Bodyweight</label>
                                                </div>
                                            </div>
                                            <div class="col-md-4 mb-2">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" id="eq_dumbbells" value="dumbbells">
                                                    <label class="form-check-label" for="eq_dumbbells" data-translate="dumbbells">Dumbbells</label>
                                                </div>
                                            </div>
                                            <div class="col-md-4 mb-2">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" id="eq_barbell" value="barbell">
                                                    <label class="form-check-label" for="eq_barbell" data-translate="barbell">Barbell</label>
                                                </div>
                                            </div>
                                            <div class="col-md-4 mb-2">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" id="eq_resistance_bands" value="resistance_bands">
                                                    <label class="form-check-label" for="eq_resistance_bands" data-translate="resistance_bands">Resistance Bands</label>
                                                </div>
                                            </div>
                                            <div class="col-md-4 mb-2">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" id="eq_pull_up_bar" value="pull_up_bar">
                                                    <label class="form-check-label" for="eq_pull_up_bar" data-translate="pull_up_bar">Pull-up Bar</label>
                                                </div>
                                            </div>
                                            <div class="col-md-4 mb-2">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" id="eq_gym_access" value="gym_access">
                                                    <label class="form-check-label" for="eq_gym_access" data-translate="gym_access">Full Gym Access</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Injury Assessment -->
                        <div class="form-section">
                            <h4 data-translate="injury_assessment">Injury Assessment</h4>
                            <div class="row">
                                <div class="col-md-4 mb-3">
                                    <label class="form-label" data-translate="injury_status">Current Injury Status</label>
                                    <select class="form-select" id="injuryStatus">
                                        <option value="none" data-translate="no_injuries">No Current Injuries</option>
                                        <option value="minor" data-translate="minor_injury">Minor Injury/Discomfort</option>
                                        <option value="moderate" data-translate="moderate_injury">Moderate Injury</option>
                                        <option value="severe" data-translate="severe_injury">Severe Injury</option>
                                    </select>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <label class="form-label" data-translate="injury_location">Injury Location</label>
                                    <select class="form-select" id="injuryLocation">
                                        <option value="" data-translate="select_location">Select Location</option>
                                        <option value="lower_back" data-translate="lower_back">Lower Back</option>
                                        <option value="upper_back" data-translate="upper_back">Upper Back</option>
                                        <option value="neck" data-translate="neck">Neck</option>
                                        <option value="shoulder" data-translate="shoulder">Shoulder</option>
                                        <option value="elbow" data-translate="elbow">Elbow</option>
                                        <option value="wrist" data-translate="wrist">Wrist</option>
                                        <option value="hip" data-translate="hip">Hip</option>
                                        <option value="knee" data-translate="knee">Knee</option>
                                        <option value="ankle" data-translate="ankle">Ankle</option>
                                    </select>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <label class="form-label" data-translate="injury_restrictions">Movement Restrictions</label>
                                    <textarea class="form-control" id="injuryRestrictions" rows="3" placeholder="Describe any movement limitations or restrictions"></textarea>
                                </div>
                            </div>
                        </div>

                        <!-- Generate Workout Button -->
                        <div class="text-center">
                            <button type="submit" class="btn btn-primary btn-lg">
                                <i class="fas fa-magic"></i> <span data-translate="generate_workout">Generate Workout Plan</span>
                            </button>
                        </div>
                    </form>

                    <!-- Results Section -->
                    <div id="workoutResults" class="results-section">
                        <h3 data-translate="your_workout_plan">Your Personalized Workout Plan</h3>
                        <div id="workoutPlanContent"></div>
                        
                        <div class="mt-4">
                            <button class="btn btn-success me-2" onclick="downloadWorkoutPDF()">
                                <i class="fas fa-download"></i> <span data-translate="download_pdf">Download PDF</span>
                            </button>
                            <button class="btn btn-warning" onclick="saveWorkoutJSON()">
                                <i class="fas fa-save"></i> <span data-translate="save_json">Save as JSON</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Supplements Tab -->
                <div class="tab-pane fade" id="supplements" role="tabpanel">
                    <div class="form-section">
                        <h4 data-translate="supplement_guide">Supplement Guide</h4>
                        <p data-translate="supplement_intro">Evidence-based supplement recommendations for your fitness goals</p>
                    </div>
                    
                    <div id="supplementsContent">
                        <!-- Supplements will be loaded here -->
                    </div>
                </div>

                <!-- Product Upload Tab -->
                <div class="tab-pane fade" id="products" role="tabpanel">
                    <div class="form-section">
                        <h4 data-translate="product_upload_title">Product Upload & Marketing</h4>
                        <p data-translate="product_upload_intro">Upload your fitness products for review and approval</p>
                    </div>

                    <form id="productUploadForm">
                        <div class="form-section">
                            <h5 data-translate="product_images">Product Images</h5>
                            <div class="upload-area" id="uploadArea">
                                <i class="fas fa-cloud-upload-alt fa-3x text-muted mb-3"></i>
                                <h5 data-translate="drag_drop_images">Drag & Drop Images Here</h5>
                                <p data-translate="or_click_browse">or click to browse files</p>
                                <input type="file" id="productImages" multiple accept="image/*" style="display: none;">
                            </div>
                            <div id="imagePreview" class="mt-3"></div>
                        </div>

                        <div class="form-section">
                            <h5 data-translate="product_details">Product Details</h5>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label class="form-label" data-translate="product_name">Product Name</label>
                                    <input type="text" class="form-control" id="productName" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label" data-translate="product_category">Category</label>
                                    <select class="form-select" id="productCategory" required>
                                        <option value="" data-translate="select_category">Select Category</option>
                                        <option value="supplements" data-translate="supplements">Supplements</option>
                                        <option value="equipment" data-translate="equipment">Equipment</option>
                                        <option value="apparel" data-translate="apparel">Apparel</option>
                                        <option value="nutrition" data-translate="nutrition">Nutrition</option>
                                    </select>
                                </div>
                                <div class="col-12 mb-3">
                                    <label class="form-label" data-translate="product_description">Description</label>
                                    <textarea class="form-control" id="productDescription" rows="4" required></textarea>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label" data-translate="product_price">Price ($)</label>
                                    <input type="number" class="form-control" id="productPrice" step="0.01" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label" data-translate="contact_info">Contact Information</label>
                                    <input type="text" class="form-control" id="contactInfo" placeholder="Email or Phone" required>
                                </div>
                            </div>
                        </div>

                        <div class="text-center">
                            <button type="submit" class="btn btn-primary btn-lg">
                                <i class="fas fa-upload"></i> <span data-translate="submit_product">Submit for Review</span>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap 5 JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Validator.js v10 -->
    <script src="https://cdn.jsdelivr.net/npm/validator@10.11.0/validator.min.js"></script>
    <!-- Custom Validation System -->
    <script src="../src/js/validation.js"></script>
    <!-- Language System -->
    <script src="../src/js/language.js"></script>
    <script src="../src/js/app.js"></script>
    <!-- Workout Generator JS -->
    <script src="../src/js/workout-generator.js"></script>
</body>
</html>