# Production Environment Configuration
# Copy this file to .env.production and fill in the actual values

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# Primary PostgreSQL database connection
DATABASE_URL=postgresql://username:password@hostname:5432/nutrition_platform_prod?sslmode=require

# Read replica for load balancing
DATABASE_READ_REPLICA_URL=postgresql://username:password@read-replica-hostname:5432/nutrition_platform_prod?sslmode=require

# Database connection pool settings
DB_MAX_OPEN_CONNECTIONS=25
DB_MAX_IDLE_CONNECTIONS=10
DB_CONNECTION_MAX_LIFETIME=5m

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
# Redis cluster for caching and sessions
REDIS_URL=redis://username:password@redis-cluster-hostname:6379/0

# Redis configuration
REDIS_POOL_SIZE=20
REDIS_MIN_IDLE_CONNECTIONS=5
REDIS_POOL_TIMEOUT=5s
REDIS_IDLE_TIMEOUT=5m

# =============================================================================
# AUTHENTICATION & SECURITY
# =============================================================================
# JWT secret key (generate with: openssl rand -base64 32)
JWT_SECRET=your-super-secret-jwt-key-here

# JWT token expiration
JWT_ACCESS_TOKEN_EXPIRY=15m
JWT_REFRESH_TOKEN_EXPIRY=7d

# Password hashing
BCRYPT_ROUNDS=12

# =============================================================================
# API CONFIGURATION
# =============================================================================
# Production API domain
API_DOMAIN=https://api.nutrition-platform.com

# Frontend domain for CORS
FRONTEND_DOMAIN=https://nutrition-platform.com

# API rate limiting
RATE_LIMIT_REQUESTS_PER_MINUTE=100
RATE_LIMIT_BURST=200

# API version
API_VERSION=v1

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
# SSL/TLS configuration
SSL_CERT_PATH=/etc/ssl/certs/nutrition-platform.crt
SSL_KEY_PATH=/etc/ssl/private/nutrition-platform.key

# Security headers
SECURITY_HEADERS_ENABLED=true
CORS_ENABLED=true
HELMET_ENABLED=true

# Content Security Policy
CSP_ENABLED=true
CSP_REPORT_URI=/api/v1/security/csp-report

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
# Log level (debug, info, warn, error)
LOG_LEVEL=info

# Structured logging
LOG_FORMAT=json

# Correlation IDs
CORRELATION_ID_ENABLED=true

# =============================================================================
# MONITORING & OBSERVABILITY
# =============================================================================
# Prometheus metrics
METRICS_ENABLED=true
METRICS_PORT=9090

# Health check configuration
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_PATH=/health

# Sentry error tracking
SENTRY_DSN=https://your-sentry-dsn-here
SENTRY_ENVIRONMENT=production

# =============================================================================
# CACHING CONFIGURATION
# =============================================================================
# Cache TTL settings
CACHE_TTL_DEFAULT=5m
CACHE_TTL_USER_DATA=15m
CACHE_TTL_NUTRITION_DATA=30m
CACHE_TTL_STATIC_DATA=1h

# Cache invalidation
CACHE_INVALIDATION_ENABLED=true

# =============================================================================
# CDN CONFIGURATION
# =============================================================================
# CloudFront or similar CDN
CDN_DOMAIN=https://cdn.nutrition-platform.com
CDN_ENABLED=true

# Static asset configuration
STATIC_ASSET_VERSIONING=true
STATIC_ASSET_COMPRESSION=true

# =============================================================================
# EMAIL CONFIGURATION
# =============================================================================
# SMTP settings for notifications
SMTP_HOST=smtp.email-provider.com
SMTP_PORT=587
SMTP_USERNAME=your-smtp-username
SMTP_PASSWORD=your-smtp-password
SMTP_FROM_EMAIL=noreply@nutrition-platform.com
SMTP_FROM_NAME=Nutrition Platform

# =============================================================================
# FILE STORAGE CONFIGURATION
# =============================================================================
# AWS S3 or similar
AWS_REGION=us-east-1
AWS_S3_BUCKET=nutrition-platform-uploads
AWS_ACCESS_KEY_ID=your-access-key
AWS_SECRET_ACCESS_KEY=your-secret-key

# =============================================================================
# ANALYTICS CONFIGURATION
# =============================================================================
# Google Analytics or similar
GOOGLE_ANALYTICS_ID=GA-XXXXXXXXX

# Custom analytics
ANALYTICS_ENABLED=true
ANALYTICS_ENDPOINT=/api/v1/analytics/events

# =============================================================================
# FEATURE FLAGS
# =============================================================================
# Feature toggles
FEATURE_REAL_TIME_NOTIFICATIONS=true
FEATURE_PWA=true
FEATURE_OFFLINE_MODE=true
FEATURE_ADVANCED_ANALYTICS=true

# =============================================================================
# PERFORMANCE CONFIGURATION
# =============================================================================
# Server configuration
SERVER_PORT=8080
SERVER_READ_TIMEOUT=30s
SERVER_WRITE_TIMEOUT=30s
SERVER_IDLE_TIMEOUT=60s

# Gzip compression
GZIP_ENABLED=true
GZIP_MIN_SIZE=1024

# =============================================================================
# GDPR & PRIVACY
# =============================================================================
# Data retention
DATA_RETENTION_DAYS=365
DATA_ANONYMIZATION_ENABLED=true

# Privacy settings
PRIVACY_POLICY_URL=https://nutrition-platform.com/privacy
TERMS_OF_SERVICE_URL=https://nutrition-platform.com/terms

# =============================================================================
# BACKUP CONFIGURATION
# =============================================================================
# Database backup
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_ENCRYPTION_ENABLED=true

# Backup storage
BACKUP_STORAGE_TYPE=s3
BACKUP_S3_BUCKET=nutrition-platform-backups

# =============================================================================
# ENVIRONMENT METADATA
# =============================================================================
ENVIRONMENT=production
VERSION=1.0.0
DEPLOYMENT_TIMESTAMP=2025-01-01T00:00:00Z
GIT_COMMIT_SHA=your-commit-sha-here
